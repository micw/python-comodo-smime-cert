# Python CLI for ordering free S/MIME certificates from Comodo

## Motivation

Comodo provides free S/MIME certificates for email signature and encryption (https://secure.comodo.com/products/frontpage?area=SecureEmailCertificate).
Unfortunately, browser support for key generation is required. This feature is not available in all browsers (see https://support.comodo.com/index.php?/Knowledgebase/Article/View/475/0/which-browser-can-i-use-to-signup-for-a-email-certificate).
Besides this, the keys generated by firefox are only 2048 bits strong.

So I decided to wrap the order page in a python script to allow certificate order via command line. 

## Usage

First create an RSA private key:

```
openssl genrsa -out private.key 4096
```

Then go to https://www.comodo.com/repository/docs/20081224_SecureEmailSubscriberAgreement.html and read the license agreement. If you agree, use the script to order the certificate:

```
./generate_cert.py --accept-agreement-url https://www.comodo.com/repository/docs/20081224_SecureEmailSubscriberAgreement.html \
  --firstname John --lastname Doe --country "United States" --email john.doe@hotmail.com --privkey private.key
```

The script will send the your public key to Comodo. The private key is only used to sign the request and will never be sent to Comodo. You will receive an email to confirm your email address.

Don't forget to note the challenge password - it will be required to revoke the certificate if you loose your key.

